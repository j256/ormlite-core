<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on July 27, 2016 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>ORMLite Documentation: 6. Upgrade From Old Versions</title>

<meta name="description" content="ORMLite Documentation: 6. Upgrade From Old Versions">
<meta name="keywords" content="ORMLite Documentation: 6. Upgrade From Old Versions">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="How-to-Upgrade"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="ormlite_5.html#Custom-Persisters" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t5_002e0" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite_5.html#Advanced" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Upgrade-From-Old-Versions"></a>
<h1 class="chapter">6. Upgrade From Old Versions</h1>

<a name="index-upgrading-from-previous-versions"></a>
<a name="index-versions_002c-upgrading"></a>
<a name="index-changes-with-ORMLite-versions"></a>
<a name="index-how-to-upgrade"></a>
<p>We strive to maintain backwards compatibility and to provide deprecated versions of old classes and methods.
However, sometimes when a new version is released, changes are made that require programmers to change their code
and rarely the on-disk database formats. 
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#g_t5_002e0">6.1 Notes About Version 5.0</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Notes about version 5.0
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t4_002e49">6.2 Notes About Version 4.49</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Notes about version 4.49
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t4_002e45">6.3 Upgrade to Version 4.45</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Upgrade to version 4.45
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t4_002e43">6.4 Problems With Version 4.43</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Problems with version 4.43
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t4_002e37">6.5 Upgrade to Version 4.37</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Upgrade to version 4.37
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t4_002e30">6.6 Upgrade to Version 4.30</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Upgrade to version 4.30
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t4_002e20">6.7 Upgrade to Version 4.20</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Upgrade to version 4.20
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t4_002e14">6.8 Upgrade to Version 4.14</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Upgrade to version 4.14
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t4_002e10">6.9 Upgrade to Version 4.10</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Upgrade to version 4.10
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t4_002e0">6.10 Upgrade to Version 4.0</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Upgrade to version 4.0
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t3_002e2">6.11 Upgrade to Version 3.2</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Upgrade to version 3.2
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t2_002e4">6.12 Upgrade to Version 2.4</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Upgrade to version 2.4
</td></tr>
</table>

<hr size="6">
<a name="g_t5_002e0"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t4_002e49" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Notes-About-Version-5_002e0"></a>
<h2 class="section">6.1 Notes About Version 5.0</h2>

<p>A number of things have changed and it&rsquo;s been a long time since the last published ORMLite release, so a .0 number
on the release seemed to be warranted.  See the following details.
</p>
<ul>
<li> ORMLite now requires Java 6 and no longer supports Java 5.  We also added <code>java.io.Closeable</code> support for Java
7 and better support for Java 8 but they are not required.

</li><li> We used the native locale to do uppercase database entity names (tables and fields).  This
sounds like a good idea until you realize that in Turkish, a uppercase i with a dot is a capital I with a dot which can
be incompatible with databases that don&rsquo;t understand UTF8 names.  For this reason the default behavior is to do
capitalization of entities using <code>Locale.ENGLISH</code>.  This means that your schema may need to change.  To go back
to the old behavior, you should override the appropriate <code>DatabaseType</code> and override the
<code>upCaseEntityName(String)</code> method.

</li><li> We&rsquo;ve added the usage of the <code>java.io.Closeable</code> interface in a number of places for Java 7 support. This means
that you may not get warnings about unclosed iterators and other things.  Watch for and pay attention to them.  They are
important.  Java 7 is not required.

</li><li> To better support database partitioning, we made some changes to the <code>ConnectionSource</code> interface so now the
table name is specified which allows the <code>ConnectionSource</code> to make decisions about which database to connect to
depending on the table.

</li><li> We&rsquo;ve made changes to Android to better support the <code>java.sql.Timestamp</code> and <code>java.sql.Date</code> as strings
in the database.  If you were using this types before you may have to add a <code>persisterClass = TimeStampType.class</code>
or  <code>SqlDateType.class</code>.

</li><li> We&rsquo;ve removed a number of deprecated methods:

<ul>
<li> Dao.setAutoCommit(boolean), isAutoCommit()
</li><li> QueryBuilder.clear(), limit(int), offset(int) 
</li><li> ForeignCollectionField.maxEagerForeignCollectionLevel(), foreignColumnName()
</li><li> DatabaseFieldConfig.setMaxEagerForeignCollectionLevel(), setForeignCollectionMaxEagerForeignCollectionLevel(),
setForeignCollectionOrderColumn(), setForeignCollectionForeignColumnName()
</li><li> DataSourceConnectionSource.setUsesTransactions(boolean)
</li><li> JdbcPooledConnectionSource.setUsesTransactions(boolean)
</li><li> OpenHelperManager.release()
</li><li> AndroidDatabaseResults(Cursor, boolean, ObjectCache) constructor
</li></ul>

</li></ul>

<hr size="6">
<a name="g_t4_002e49"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t5_002e0" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t4_002e45" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Notes-About-Version-4_002e49"></a>
<h2 class="section">6.2 Notes About Version 4.49</h2>

<p>The 4.49 release took a long time to put out unfortunately so it included a lot of changes, a couple of which need
to be specifically enumerated.  For more details, please check the change-log.
</p>
<ul>
<li> Due to a couple of reporting issues, it was determined that some sort of locking was needed to protect concurrent
usage of <code>dao.callBatchTasks(...)</code> calls from multiple threads when dealing with a single database connection.  ORMLite
now makes an attempt to detect a single-connection connection-source and will enforce locking so that only one batch
task can be running at a time.

</li><li> A lot of changes were made to have <code>CloseableIterator</code> and other classes extend <code>java.io.Closeable</code>.  If
you are extending any of these classes then you may have to tweak your code.

</li><li> We fixed a problem with the <code>maxForeignAutoRefreshLevel</code> configuration setting which was particularly impacting
Android users.

</li></ul>

<p>Again, please check the change-log for the entire list.
</p>
<hr size="6">
<a name="g_t4_002e45"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t4_002e49" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t4_002e43" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Upgrade-to-Version-4_002e45"></a>
<h2 class="section">6.3 Upgrade to Version 4.45</h2>

<p>To fix the date-string format bug introduced in version 4.43, I&rsquo;ve decided to revert back to the date-string of
<code>yyyy-MM-dd HH:mm:ss.SSSSSS</code> from the one introduced in 4.43 which was <code>yyyy-MM-dd HH:mm:ss.SSS</code>.  This means
that for folks doing date comparisons or using the <code>version = true</code> feature, if you have created data under 4.43
you will have to add the following to your date fields to make it work.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseField(version = true, format=&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;,
   dataType=DataType.DATE_STRING)
private Date date;
</pre></td></tr></table>

<p>If you have data that was created <em>both</em> in 4.42 or before and 4.43 or 4.44 then you will have to convert some of
the data.  Something like the following <code>UPDATE</code> statement should work:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">UPDATE your-table SET your-date-field =
    CONCAT(SUBSTRING(your-date-field, 1, 20), &quot;000&quot;,
       SUBSTRING(your-date-field, 20, 3))
    WHERE LENGTH(your-date-field) = 23;
</pre></td></tr></table>

<p>My sincere apologies for this mess up.
</p>
<hr size="6">
<a name="g_t4_002e43"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t4_002e45" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t4_002e37" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Problems-With-Version-4_002e43"></a>
<h2 class="section">6.4 Problems With Version 4.43</h2>

<p>In the process of looking into adding the timezone to the date-string, I made a change to the date-string format from
<code>yyyy-MM-dd HH:mm:ss.SSSSSS</code> to <code>yyyy-MM-dd HH:mm:ss.SSS</code> &ndash; changing the milliseconds output from 6 digits to 3.
This relatively small change <em>broke</em> the equality checking for date-strings which meant that <code>Where.eq(...)</code> and
<code>version = true</code> field settings ceased to work correctly.  The version processing code uses equality to verify that
the object date is the same with the database and the new string value <code>...###</code> is not equal to the old database
format of <code>...######</code>.
</p>
<p>We have fixed this problem in 4.45 which reverts the string format.  If you want to fix it permanently, you can use the
<code>format</code> specifier on your date-string fields:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseField(version = true, format=&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot;,
   dataType=DataType.DATE_STRING)
private Date date;
</pre></td></tr></table>

<p>My apologies for this problem.
</p>
<hr size="6">
<a name="g_t4_002e37"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t4_002e43" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t4_002e30" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Upgrade-to-Version-4_002e37"></a>
<h2 class="section">6.5 Upgrade to Version 4.37</h2>

<a name="index-Android-case-sensitive-columns"></a>
<a name="index-case-sensitive-columns_002c-Android"></a>
<p>For Android users, in 4.37 we fixed a problem with the looking up of column names with imbedded periods in them by implementing
our own lookup and not using the Android API.  This had the unintended consequence of making the field name lookups be case
<em>sensitive</em>.  If you used ORMLite to generate your tables or if you used the <code>@DatabaseField</code> <code>columnName</code>
to match the case then you would <em>not</em> be affected by this issue.  But if you were working with an existing database with
field names that did <em>not</em> match the case of the Java fields, then as of 4.37 you would be seeing the following exception.  
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">java.sql.SQLException: Unknown field 'accountName' from the
    Android sqlite cursor, not in:[accountname, ...]&quot;
</pre></td></tr></table>

<p>Since other parts of the system are <em>also</em> case sensitive, we made the decision to not fix this problem but to encourage
our users to properly use the <code>@DatabaseField</code> <code>columnName</code> if the case of your database does not match your
Java fields.  See <a href="ormlite_2.html#columnName">columnName</a>.
</p>
<p>For example, before 4.37 your Android SQLite database might have the column <code>accountname</code> although your Java field might
actually be <code>accountName</code>.  As of 4.37, when you look up your Java fields you will have to add a <code>columnName</code> value
like the following:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseField(columnName = &quot;accountname&quot;)
private String accountName;
</pre></td></tr></table>

<p>We made the decision to force this change because there are other parts of ORMLite that are <em>already</em> case sensitive. 
For example, if you had mismatched case in your field names then using the <code>dao.queryForMatching(obj)</code> method would
not work without the case matching the database.   If you were building a custom query, you would have to say
<code>queryBuilder.where().eq(&quot;columnname&quot;, value)</code> and could not use <code>columnName</code>.
</p>
<p>Sorry for not recognizing this incompatibility earlier.
</p>
<hr size="6">
<a name="g_t4_002e30"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t4_002e37" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t4_002e20" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Upgrade-to-Version-4_002e30"></a>
<h2 class="section">6.6 Upgrade to Version 4.30</h2>

<p>For Android users, in 4.30 we added some reflection hacks to make the processing of the <code>@DatabaseField</code> annotations
a lot faster.  For this reason the following changes must be made:
</p>
<ul>
<li> Instead of calling the annotation methods directly which causes tons of unnecessary GC objects, we use reflection and
build a <code>DatabaseTableConfig</code> instead.  This means that if you have defined custom Dao classes, you will need to add
a new constructor:

<table><tr><td>&nbsp;</td><td><pre class="example">public class AccountDaoImpl extends BaseDaoImpl&lt;Account, String&gt;
  implements AccountDao {
    public AccountDaoImpl(ConnectionSource connectionSource)
      throws SQLException {
        super(connectionSource, Account.class);
    }
    // NOTE: this constructor is needed under Android in 4.30
    public AccountDaoImpl(ConnectionSource connectionSource,
        DatabaseTableConfig&lt;Account&gt; tableConfig)
      throws SQLException {
        super(connectionSource, tableConfig);
    }
}
</pre></td></tr></table>

</li><li> Because we had to write specific code to reflect on the <code>@DatabaseField</code> annotation we have deprecated the
<code>@DatabaseFieldSimple</code> and other annotations that were added in version 4.26.  Sorry for the reversal on this but
they were also causing confusion.

</li></ul>

<hr size="6">
<a name="g_t4_002e20"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t4_002e30" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t4_002e14" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Upgrade-to-Version-4_002e20"></a>
<h2 class="section">6.7 Upgrade to Version 4.20</h2>

<p>In 4.20 we made a couple of changes that bear some note.
</p>
<ul>
<li> For Android developers, we significantly improved the mechanism for injecting the class of the database open helper.
Setting the class name in the <code>strings.xml</code> resource file is still supported although it is not necessary if you are using
<code>OrmLiteBaseActivity</code> or the other base classes.  If you are extending those classes, ORMLite will detect the helper
class automagically.  The <code>SqliteOpenHelperFactory</code> mechanism, although still supported, has been deprecated.
See <a href="ormlite_4.html#database-open-helper-wiring">database open helper wiring</a>.  

</li><li> We added the <code>uniqueCombo</code> setting for uniqueness across field combinations.  We also changed the SQL that was generated
if you are using the <code>unique</code> setting.  The old SQL was correct but the new versions are more compatible with the SQL standard
and the various database types.  See <a href="ormlite_2.html#unique-constraints">unique constraints</a>.

</li><li> We did some memory audits of ORMLite and improved the way that we were using DAOs internally so that we use cached DAOs where
possible.  We also improved the memory usage with foreign fields and some of the <code>TableUtil</code> methods.  Thanks much to various
folks on the user list who significantly helped with this process.

</li></ul>

<hr size="6">
<a name="g_t4_002e14"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t4_002e20" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t4_002e10" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Upgrade-to-Version-4_002e14"></a>
<h2 class="section">6.8 Upgrade to Version 4.14</h2>

<p>In 4.14 we added a <code>DatabaseType.BYTE_ARRAY</code> which stores <code>byte[]</code> directly.  See <a href="ormlite_2.html#BYTE_005fARRAY">BYTE_ARRAY</a>.  In the past, this array
would have been stored as a serialized array of bytes.  To not break backwards compatibility with the database, fields with the
<code>byte[]</code> type <em>must</em> now specify either the <code>BYTE_ARRAY</code> or <code>SERIALIZABLE</code> types using the <code>dataType</code> field
on <code>@DatabaseField</code> &ndash; it will not be chosen automatically.  See <a href="ormlite_2.html#DatabaseField-dataType">DatabaseField dataType</a>.  If we did not do this then
previously stored data would be read from the database improperly.
</p>
<p>In addition, serialized types must also now specify their <code>dataType</code> value.  You should use <code>DataType.SERIALIZABLE</code> to
continue to store serialized objects in the database.  This will allow us to add direct support for other serialized types in the
future without breaking backwards compatibility.
</p>
<p>If you already have Serializable data (byte[] or other objects) stored in a database then you will need to add something like the
following to your fields:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseField(dataType = DataType.SERIALIZABLE)
Serializable field;
</pre></td></tr></table>

<p>For newly stored byte[] fields, you could use the BYTE_ARRAY type to store the bytes directly.  But any existing data will <em>not</em>
be converted automatically.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseField(dataType = DataType.BYTE_ARRAY)
byte[] field;
</pre></td></tr></table>

<hr size="6">
<a name="g_t4_002e10"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t4_002e14" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t4_002e0" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Upgrade-to-Version-4_002e10"></a>
<h2 class="section">6.9 Upgrade to Version 4.10</h2>

<p>4.10 was a reasonably large release containing some feature upgrades and some bug fixes.  No data formats were changed, however
the following API code was altered:
</p>
<ul>
<li> We significantly refactored the <code>RawResults</code> class which is now deprecated and replaced it with the
<code>GenericRawResults</code> class.  See the <code>GenericRawResults</code> for more information.  See section <a href="ormlite_2.html#Raw-Queries">Issuing Raw Queries</a>.  

</li><li> The <code>Dao</code> methods <code>queryForAllRaw()</code> and <code>iteratorRaw()</code> are now deprecated.  They are replaced with
<code>queryRaw(...)</code> methods.  See the <code>Dao</code> class javadocs for more information. 

</li><li> Before this release the -jdbc and -android versions of ORMLite contained the -core functionality.  In this release we split
out the -core from the other packages so you will now need to install <em>both</em> the core and android (or jdbc) packages to get the
package to work.

</li></ul>

<hr size="6">
<a name="g_t4_002e0"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t4_002e10" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t3_002e2" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Upgrade-to-Version-4_002e0"></a>
<h2 class="section">6.10 Upgrade to Version 4.0</h2>

<p>No data formats were changed, however the following API code was altered.  Removed any outside usage of the <code>DatabaseType</code> since
the <code>ConnectionSource</code> now provides it.  Also added features to be able to prepare update and delete statements.  To provide
type safety, we&rsquo;ve moved back to using <code>QueryBuilder</code> so we can have <code>UpdateBuilder</code> and <code>DeleteBuilder</code>.  And instead
of a <code>PreparedStmt</code> there is <code>PreparedQuery</code>, <code>PreparedUpdate</code>, and <code>PreparedDelete</code>.  Here are the details:
</p>
<ul>
<li> We have removed most of the cases where the user has to deal with the <code>DatabaseType</code>.
All you need to set on the DAOs is the <code>ConnectionSource</code> which provides the database type 
internally.  To create and drop the tables, also, you only need the <code>ConnectionSource</code>.

</li><li> Constructing a <code>BaseDaoImpl</code> now self-initializes if it is constructed with a
<code>ConnectionSource</code>.  This validates the class configurations meaning that it now throws a
<code>SQLException</code>.

</li><li> Constructing a <code>JdbcConnectionSource</code> or <code>DataSourceConnectionSource</code> also now
throws a <code>SQLException</code> since they also now self-initialize if they are constructed with the URL.
This creates the internal database type and loads the driver class for it.  

</li><li> Deprecated the <code>createJdbcConnectionSource</code> method in the <code>DatabaseTypeUtils</code> and
turned the <code>loadDriver</code> method into a no-op.  You now just instantiate the <code>JdbcConnectionSource</code>
directly and there is no need for referencing the <code>DatabaseTypeUtils</code> anymore.

</li><li> <code>Dao.statementBuilder()</code> method changed (back) to <code>Dao.queryBuilder()</code>.

</li><li> <code>Dao.queryBuilder()</code> returns a <code>QueryBuilder</code> instead of a <code>StatementBuilder</code>.

</li><li> You now call <code>distinct()</code>, <code>limit()</code> and <code>offset()</code> on the <code>QueryBuilder</code>.
Unfortunately, there are no deprecated methods for them on the <code>StatementBuilder</code>.

</li><li> You now call <code>selectColumns()</code> on the <code>QueryBuilder</code> instead of <code>columns()</code>
since now we have columns also in the <code>UpdateBuilder</code>.  Unfortunately, there are no deprecated
methods for them on the <code>StatementBuilder</code>.

</li><li> You call <code>QueryBuilder.prepare()</code> instead of <code>StatementBuilder.prepareStatement()</code>.
It returns a <code>PreparedQuery</code> instead of a <code>PreparedStmt</code>.  You pass a <code>PreparedQuery</code>
into the <code>Dao.query()</code> and <code>Dao.iterator()</code> methods instead of a <code>PreparedStmt</code>.

</li><li> We removed the <code>DatabaseTypeFactory</code> class since it was no longer needed for Spring
configurations.

</li><li> Removed <code>BaseJdbcDao</code> since it had been deprecated in 3.X.

</li></ul>

<hr size="6">
<a name="g_t3_002e2"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t4_002e0" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t2_002e4" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Upgrade-to-Version-3_002e2"></a>
<h2 class="section">6.11 Upgrade to Version 3.2</h2>

<p>The 3.2 release involved a <em>very</em> large code reorganization and migration.  There were no on-disk changes unless you somehow
managed to get ORMLite working previously on Android.  The project was basically split into 3 pieces: core functionality, JDBC
database handlers, and the new Android handler.  With significant help from Kevin G, we abstracted all of the database calls into
3 interfaces: <code>ConnectionSource</code> (like a <code>DataSource</code>), <code>DatabaseConnection</code> (like a <code>Connection</code>) and
<code>DatabaseResults</code> (like a <code>ResultSet</code>).  Once we had the interfaces in place, we wrote delegation classes for JDBC and
Android handlers.  This means that as of 3.X we release 3 packages: ormlite-core (for developers), ormlite-jdbc (for people
connecting to JDBC databases), and ormlite-android (for Android users).  Both the JDBC and Android packages include all of the
core code as well.
</p>
<p>Along the way a number of specific changes were made to the methods and classes:
</p>
<ul>
<li> Since we split off the JDBC, we renamed the <code>BaseJdbcDao</code> to be <code>BaseDaoImpl</code> in the core package. You will
need to adjust any DAOs that you have.

</li><li> We are in the process of allowing custom delete and update methods so we took the major upgrade opportunity to
rename the <code>QueryBuilder</code> object to be <code>StatementBuilder</code>.  <em>NOTE:</em> this was reverted later.

</li><li> Because of the above, we also renamed <code>Dao.queryBuilder()</code> method to be <code>statementBuilder()</code>.  <em>NOTE:</em> this
was reverted later.

</li><li> Also renamed the <code>PreparedQuery</code> object to be <code>PreparedStmt</code>.

</li><li> One of the big changes for those of you using an external JDBC <code>DataSource</code> is that you no longer set it on the
DAO directly.  You need to wrap your <code>DataSource</code> in a <code>DataSourceConnectionSource</code> wrapper class which gets
set on the DAO instead.

</li></ul>

<p>Again, there were no on-disk changes unless you somehow managed to get ORMLite working previously on Android.  Since we were using
JDBC before to do the data marshaling and now are doing it by hand, some of the data representations may have changed.  Sorry for
the lack of detail here.
</p>
<hr size="6">
<a name="g_t2_002e4"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t3_002e2" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Upgrade-to-Version-2_002e4"></a>
<h2 class="section">6.12 Upgrade to Version 2.4</h2>

<p>A bug was fixed in 2.4 with how we were handling Derby and Hsqldb.  Both of these databases seem to be capitalizing table and field
names in certain situations which meant that customized queries of ORMLite generated tables were affected.  In version 2.4,
all tables and field names are capitalized in the SQL generated for Derby and Hsqldb databases. This means that if you have data
in these databases from a pre 2.4 version, the 2.4 version will not be able to find the tables and fields without renaming to be
uppercase.
</p>
<hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#How-to-Upgrade" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_7.html#Examples" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#Index-of-Concepts" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated by <em>Gray Watson</em> on <em>July 27, 2016</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
 </font>
 <br>

</p>
</body>
</html>
